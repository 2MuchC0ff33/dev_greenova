{% extends 'base.html' %}

{% block title %}{{ title }} - Greenova EMS{% endblock %}

{% block content %}
<div class="container">
    <article class="grid">
        <div>
            <hgroup>
                <h1>{{ title }}</h1>
                <h2>{% if form.instance.pk %}Edit obligation {{ form.instance.obligation_number }}{% else %}Create new obligation{% endif %}</h2>
            </hgroup>

            <form method="post" novalidate>
                {% csrf_token %}
                
                <!-- Primary Details -->
                <details open>
                    <summary><strong>Primary Details</strong></summary>
                    <div class="grid">
                        <div>
                            {{ form.obligation_number.label_tag }}
                            {{ form.obligation_number }}
                            {{ form.obligation_number.errors }}

                            {{ form.project_name.label_tag }}
                            {{ form.project_name }}
                            {{ form.project_name.errors }}

                            {{ form.status.label_tag }}
                            {{ form.status }}
                            {{ form.status.errors }}
                        </div>
                        <div>
                            {{ form.action_due_date.label_tag }}
                            {{ form.action_due_date }}
                            {{ form.action_due_date.errors }}

                            {{ form.close_out_date.label_tag }}
                            {{ form.close_out_date }}
                            {{ form.close_out_date.errors }}
                        </div>
                    </div>
                </details>

                <!-- Environmental Details -->
                <details>
                    <summary><strong>Environmental Details</strong></summary>
                    <div class="grid">
                        <div>
                            {{ form.primary_environmental_mechanism.label_tag }}
                            {{ form.primary_environmental_mechanism }}
                            {{ form.primary_environmental_mechanism.errors }}

                            {{ form.environmental_aspect.label_tag }}
                            {{ form.environmental_aspect }}
                            {{ form.environmental_aspect.errors }}
                        </div>
                        <div>
                            {{ form.procedure.label_tag }}
                            {{ form.procedure }}
                            {{ form.procedure.errors }}
                        </div>
                    </div>
                </details>

                <!-- Obligation Details -->
                <details>
                    <summary><strong>Obligation Details</strong></summary>
                    <div class="grid">
                        {{ form.obligation.label_tag }}
                        {{ form.obligation }}
                        {{ form.obligation.errors }}

                        {{ form.project_phase.label_tag }}
                        {{ form.project_phase }}
                        {{ form.project_phase.errors }}
                    </div>
                </details>

                <!-- Responsibility -->
                <details>
                    <summary><strong>Responsibility</strong></summary>
                    <div class="grid">
                        <div>
                            {{ form.accountability.label_tag }}
                            {{ form.accountability }}
                            {{ form.accountability.errors }}
                        </div>
                        <div>
                            {{ form.responsibility.label_tag }}
                            {{ form.responsibility }}
                            {{ form.responsibility.errors }}
                        </div>
                        <div>
                            {{ form.person_email.label_tag }}
                            {{ form.person_email }}
                            {{ form.person_email.errors }}
                        </div>
                    </div>
                </details>

                <!-- Recurrence -->
                <details>
                    <summary><strong>Recurrence</strong></summary>
                    <div class="grid">
                        <div>
                            {{ form.recurring_obligation.label_tag }}
                            {{ form.recurring_obligation }}
                            {{ form.recurring_obligation.errors }}
                        </div>
                        <div>
                            {{ form.recurring_frequency.label_tag }}
                            {{ form.recurring_frequency }}
                            {{ form.recurring_frequency.errors }}
                        </div>
                        <div>
                            {{ form.recurring_status.label_tag }}
                            {{ form.recurring_status }}
                            {{ form.recurring_status.errors }}
                        </div>
                        <div>
                            {{ form.recurring_forcasted_date.label_tag }}
                            {{ form.recurring_forcasted_date }}
                            {{ form.recurring_forcasted_date.errors }}
                        </div>
                    </div>
                </details>

                <!-- Inspection -->
                <details>
                    <summary><strong>Inspection</strong></summary>
                    <div class="grid">
                        <div>
                            {{ form.inspection.label_tag }}
                            {{ form.inspection }}
                            {{ form.inspection.errors }}
                        </div>
                        <div>
                            {{ form.inspection_frequency.label_tag }}
                            {{ form.inspection_frequency }}
                            {{ form.inspection_frequency.errors }}
                        </div>
                        <div>
                            {{ form.site_or_desktop.label_tag }}
                            {{ form.site_or_desktop }}
                            {{ form.site_or_desktop.errors }}
                        </div>
                    </div>
                </details>

                <!-- Control and Analysis -->
                <details>
                    <summary><strong>Control and Analysis</strong></summary>
                    <div class="grid">
                        <div>
                            {{ form.new_control_action_required.label_tag }}
                            {{ form.new_control_action_required }}
                            {{ form.new_control_action_required.errors }}
                        </div>
                        <div>
                            {{ form.obligation_type.label_tag }}
                            {{ form.obligation_type }}
                            {{ form.obligation_type.errors }}
                        </div>
                        <div>
                            {{ form.gap_analysis.label_tag }}
                            {{ form.gap_analysis }}
                            {{ form.gap_analysis.errors }}
                        </div>
                        <div>
                            {{ form.notes_for_gap_analysis.label_tag }}
                            {{ form.notes_for_gap_analysis }}
                            {{ form.notes_for_gap_analysis.errors }}
                        </div>
                        <div>
                            {{ form.covered_in_which_inspection_checklist.label_tag }}
                            {{ form.covered_in_which_inspection_checklist }}
                            {{ form.covered_in_which_inspection_checklist.errors }}
                        </div>
                    </div>
                </details>

                <!-- Comments -->
                <details>
                    <summary><strong>Comments</strong></summary>
                    <div class="grid">
                        <div>
                            {{ form.supporting_information.label_tag }}
                            {{ form.supporting_information }}
                            {{ form.supporting_information.errors }}
                        </div>
                        <div>
                            {{ form.general_comments.label_tag }}
                            {{ form.general_comments }}
                            {{ form.general_comments.errors }}
                        </div>
                        <div>
                            {{ form.compliance_comments.label_tag }}
                            {{ form.compliance_comments }}
                            {{ form.compliance_comments.errors }}
                        </div>
                        <div>
                            {{ form.non_conformance_comments.label_tag }}
                            {{ form.non_conformance_comments }}
                            {{ form.non_conformance_comments.errors }}
                        </div>
                        <div>
                            {{ form.evidence.label_tag }}
                            {{ form.evidence }}
                            {{ form.evidence.errors }}
                        </div>
                    </div>
                </details>

                <!-- Form Actions -->
                <div class="grid">
                    <button type="submit" class="primary">Save Obligation</button>
                    <a href="{% url 'obligations_list' %}" role="button" class="secondary">Cancel</a>
                </div>
            </form>
        </div>
    </article>
</div>
{% endblock %}